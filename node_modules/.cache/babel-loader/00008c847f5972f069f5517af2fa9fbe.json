{"ast":null,"code":"import _regeneratorRuntime from\"E:/PlacementPortalProject/Portal/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/PlacementPortalProject/Portal/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"E:/PlacementPortalProject/Portal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import\"./AlumniChat.css\";import qs from\"qs\";import{useLocation}from\"react-router-dom\";import{chat,fetchMsgs}from\"../DetailsService\";import{useAuth0}from\"@auth0/auth0-react\";import grad from\"./grad.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AlumniChat(){var _useAuth=useAuth0(),user=_useAuth.user;var _useState=useState(),_useState2=_slicedToArray(_useState,2),msgValue=_useState2[0],setMsgValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),msgChat=_useState4[0],setMsgChat=_useState4[1];var FromName=user.nickname;var location=useLocation();var ToName=location.state.Name;var MsgRead=function MsgRead(){setMsgValue(document.getElementById(\"enterMsg\").value);};var fetchMsg=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var alumniAndStudent;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:alumniAndStudent={FromName:user.nickname,ToName:ToName};_context.next=3;return fetchMsgs(qs.stringify(alumniAndStudent)).then(function(response){setMsgChat(response.data.body);}).catch(function(error){return console.log(error);});case 3:case\"end\":return _context.stop();}},_callee);}));return function fetchMsg(){return _ref.apply(this,arguments);};}();useEffect(function(){fetchMsg();},[]);console.log(ToName);var SendMsg=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var requestBodyArray;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:requestBodyArray={FromName:FromName,ToName:ToName,MsgValue:msgValue,FromToMsg:1,SoftDelete:0};_context2.next=3;return chat(qs.stringify(requestBodyArray)).then(function(response){console.log(response);document.getElementById(\"enterMsg\").value=\"\";}).catch(function(error){return console.log(error);});case 3:fetchMsg();case 4:case\"end\":return _context2.stop();}},_callee2);}));return function SendMsg(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"alumniSec\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"img\",{src:grad,alt:\"graduation\"}),\" \",ToName]}),/*#__PURE__*/_jsx(\"div\",{className:\"messageSection\",id:\"displayChat\",children:msgChat.map(function(_ref3){var fromToMsg=_ref3.fromToMsg,message=_ref3.message,msgDate=_ref3.msgDate;return/*#__PURE__*/_jsx(\"div\",{children:fromToMsg===1?/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"left\",children:[/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"br\",{})]})});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"messagePart\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"Msg\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"Msg\",placeholder:\"Enter your message here...\",id:\"enterMsg\",onChange:MsgRead})}),/*#__PURE__*/_jsx(\"div\",{className:\"sendMsg\",children:/*#__PURE__*/_jsx(\"button\",{onClick:SendMsg,children:\"SEND\"})})]})]});}","map":null,"metadata":{},"sourceType":"module"}