{"ast":null,"code":"import { NativeModules, Linking, Platform } from 'react-native';\nexport default class Agent {\n  show(url) {\n    let ephemeralSession = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let skipLegacyListener = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    let closeOnLoad = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    if (!NativeModules.A0Auth0) {\n      return Promise.reject(new Error('Missing NativeModule. React Native versions 0.60 and up perform auto-linking. Please see https://github.com/react-native-community/cli/blob/master/docs/autolinking.md.'));\n    }\n    return new Promise((resolve, reject) => {\n      let eventURL;\n      const removeListener = () => {\n        //This is done to handle backward compatibility with RN <= 0.64 which doesn't return EmitterSubscription on addEventListener\n        if (eventURL === undefined) {\n          Linking.removeEventListener('url', urlHandler);\n        } else {\n          eventURL.remove();\n        }\n      };\n      const urlHandler = event => {\n        NativeModules.A0Auth0.hide();\n        if (!skipLegacyListener) {\n          removeListener();\n        }\n        resolve(event.url);\n      };\n      const params = Platform.OS === 'ios' ? [ephemeralSession, closeOnLoad] : [closeOnLoad];\n      if (!skipLegacyListener) {\n        eventURL = Linking.addEventListener('url', urlHandler);\n      }\n      NativeModules.A0Auth0.showUrl(url, ...params, (error, redirectURL) => {\n        if (!skipLegacyListener) {\n          removeListener();\n        }\n        if (error) {\n          reject(error);\n        } else if (redirectURL) {\n          resolve(redirectURL);\n        } else if (closeOnLoad) {\n          resolve();\n        } else {\n          reject(new Error('Unknown WebAuth error'));\n        }\n      });\n    });\n  }\n  newTransaction() {\n    if (!NativeModules.A0Auth0) {\n      return Promise.reject(new Error('Missing NativeModule. React Native versions 0.60 and up perform auto-linking. Please see https://github.com/react-native-community/cli/blob/master/docs/autolinking.md.'));\n    }\n    return new Promise((resolve, reject) => {\n      NativeModules.A0Auth0.oauthParameters(parameters => {\n        resolve(parameters);\n      });\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}